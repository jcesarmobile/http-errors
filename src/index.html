<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="UTF-8" />
    <title>Awesome Capacitor App</title>
    <meta
      name="viewport"
      content="viewport-fit=cover, width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <meta name="format-detection" content="telephone=no" />
    <meta name="msapplication-tap-highlight" content="no" />

    <script
      type="module"
      src="https://unpkg.com/@ionic/pwa-elements@latest/dist/ionicpwaelements/ionicpwaelements.esm.js"
    ></script>
    <script
      nomodule
      src="https://unpkg.com/@ionic/pwa-elements@latest/dist/ionicpwaelements/ionicpwaelements.js"
    ></script>

    <link rel="icon" type="image/x-icon" href="./assets/icon/favicon.ico" />
    <link rel="manifest" href="./manifest.json" />
    <link rel="stylesheet" href="./css/style.css" />
    <meta name="theme-color" content="#31d53d" />
  </head>
  <body>
    <capacitor-welcome></capacitor-welcome>

    <script>
	
      let httpReq = async function() {
            fetch('https://someWrongDomain.com', {
              method: 'GET', // or 'PUT'
              headers: {  'Accept':' */*',
                  'User-Agent':'' }
            })
              .then((response) => response.json())
              .then((data) => {
                console.log('Success1:', data);
              })
              .catch((error) => {
                console.log('Error1:', error);
              });
            const options = {
                url: 'https://someWrongDomain.com',
                method: 'GET',
                headers: {  'Accept':' */*',
                            'User-Agent':'' },
                params: {},
                responseType: 'text',
                disableRedirects: false
              };
    
            let response = {};
    
            try {
    
                response = await window.Capacitor.Plugins.CapacitorHttp.request(options);
                console.log('Success2', response);
    
            } catch (error) {
    
                console.log('Error2', error);
                
            }
    
        //Error only appears in Xcode, in the js-console the request is never finished.
            console.log('This code is not executed any more as it stopes at the error on the CapacitorHttp plugin');
            alert(1);
    
      }
    
      httpReq();
        
      </script>
  </body>
</html>
